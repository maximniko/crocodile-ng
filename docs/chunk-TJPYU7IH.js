import{Oa as g,_a as n,e as s,t as c,w as a}from"./chunk-LLUFZ2XD.js";function i(r){return r[Math.floor(Math.random()*r.length)]}var p=class r{constructor(e,t){this.twa=e;this.http=t;this.loadCategories()}categoriesSubject=new s([]);_categories=[];_selected=[];get categories(){return this._categories}set categories(e){this._categories=e,this.categoriesSubject.next(e)}get selected(){return this._selected}set selected(e){this._selected=e}loadCategories(){let e=this.twa.getUserLanguageCode()??"en";this.http.get(`assets/categories/${e}.json`).subscribe({next:t=>{this.categories=this.toCategories(t),this.selected=Array.of(...this.categories)},error:t=>{this.http.get("assets/categories/en.json").subscribe({next:o=>{this.categories=this.toCategories(o),this.selected=Array.of(...this.categories)},error:o=>this.twa.showAlert("Can't find data for your language. Available languages de, en, fr, pt, ru.")})}})}toCategories(e){return e.map(t=>({title:t.title,words:t.words.flatMap((o,l)=>o.map(C=>({title:C,level:l+1})))}))}toggle(e){let t=this.selected.indexOf(e);t==-1?this.selected.push(e):this.selected.splice(t,1)}isSelected(e){return this.selected.find(t=>t.title==e.title)!==void 0}getRandomWord(){return i(i(this.selected).words)}static \u0275fac=function(t){return new(t||r)(a(n),a(g))};static \u0275prov=c({token:r,factory:r.\u0275fac,providedIn:"root"})};export{p as a};
