import{Ia as g,Ua as n,e as a,t as c,w as i}from"./chunk-YMOVAQ3C.js";function s(r){return r[Math.floor(Math.random()*r.length)]}var l=class r{constructor(e,t){this.twa=e;this.http=t;this.loadCategories()}categoriesSubject=new a([]);_categories=[];_selected=[];get categories(){return this._categories}set categories(e){this._categories=e,this.categoriesSubject.next(e)}get selected(){return this._selected}set selected(e){this._selected=e}loadCategories(){let e=this.twa.getUserLanguageCode()??"en";this.http.get(`assets/categories/${e}.json`).subscribe({next:t=>{this.categories=this.toCategories(t),this.selected=Array.of(...this.categories)},error:t=>{this.http.get("assets/categories/ru.json").subscribe({next:o=>{this.categories=this.toCategories(o),this.selected=Array.of(...this.categories),console.log("Inited selected",this.selected)},error:o=>this.twa.showAlert("Can't data for your language")})}})}toCategories(e){return e.map(t=>({title:t.title,words:t.words.flatMap((o,p)=>o.map(d=>({title:d,level:p+1})))}))}toggle(e){let t=this.selected.indexOf(e);t==-1?this.selected.push(e):this.selected.splice(t,1)}isSelected(e){return this.selected.find(t=>t.title==e.title)!==void 0}getRandomWord(){return s(s(this.selected).words)}static \u0275fac=function(t){return new(t||r)(i(n),i(g))};static \u0275prov=c({token:r,factory:r.\u0275fac,providedIn:"root"})};export{l as a};
